<template>
  <div id="app">
    <div class="top">
      <!-- 左上四格 -->
      <div class="t-left">
        <div class="numboxs">
          <div class="num">
            <div class="num-name">话务量</div>
            <div class="num-value">{{commonStatistic.callAmount}}</div>
          </div>
          <div class="num">
            <div class="num-name">接警数</div>
            <div class="num-value">{{commonStatistic.alarmAmount}}</div>
          </div>
          <div class="num">
            <div class="num-name">派车数</div>
            <div class="num-value">{{commonStatistic.sendAmount}}</div>
          </div>
          <div class="num">
            <div class="num-name">已完成</div>
            <div class="num-value">{{commonStatistic.finishedAmount}}</div>
          </div>
        </div>
        <div class="left-bar">
          <div class="left-bar1-box">
            <!-- 左侧柱状图1 -->
            <Chart id="bar1" width="100%" height="370px" :option="bar1opt" />
          </div>
          <hr>
          <div class="left-bar2-box">
            <!-- 左侧柱状图2 -->
            <Chart id="bar2" width="500px" height="370px" :option="bar2opt" />
            <div class="left-bar2-list">
              <ul>
                <li v-for="(item,i) in sendCarDay">
                  <i class="circle" :style="{backgroundColor:colorList[i]}"></i><span class='station-name'>{{item.org_name}}</span>：-----<span class="station-value">{{item.amount}}</span>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
      <div class="t-mid">
        <div class='time'>{{timeStr}}</div>
        <!-- 地图 -->
        <Chart id="YCmap" width="100%" height="700px" :geojson="geoJSON" registerMap="YC" :option="mapopt" />
        <div class="area-count">
          <div v-for="item in commonStatistic.distribution" class="area-count-item">{{item.region_name}}：{{item.amount}}</div>          
        </div>
      </div>
      <!-- 右侧表格及柱状图 -->
      <div class="t-right">
        <div class="t-right-form">
          <div class="onduty">
            <div class="tab-title">>>当日任务车辆<<</div> <div class="tab-head">
                <div class="tab-head-item">车辆状态</div>
                <div class="tab-head-item">车辆名称</div>
                <div class="tab-head-item">分站</div>
            </div>
            <div class="tab-main">
              <div v-if="item.isExecute===1" v-for="item in ambTask" class="tab-line">
                <div class="tab-line-status" v-if="item.status===0"><span class="bg-blue">任务开始</span></div>
                <div class="tab-line-status" v-else-if="item.status===1"><span class="bg-yellow">收到指令</span></div>
                <div class="tab-line-status" v-else-if="item.status===2"><span class="bg-cyan-blue">驶向现场</span></div>
                <div class="tab-line-status" v-else-if="item.status===3"><span class="bg-orange">到达现场</span></div>
                <div class="tab-line-status" v-else-if="item.status===4"><span class="bg-pink">病人上车</span></div>
                <div class="tab-line-status" v-else-if="item.status===5"><span class="bg-purple">到达医院</span></div>
                <div class="tab-line-name">{{item.serialNumber}}</div>
                <div class="tab-line-station">{{item.stationId}}</div>
              </div>
            </div>
          </div>
          <hr>
          <div class="waiting">
            <div class="tab-title">>>当日待命车辆<<</div> <div class="tab-head">
                <div class="tab-head-item">车辆状态</div>
                <div class="tab-head-item">车辆名称</div>
                <div class="tab-head-item">分站</div>
            </div>
            <div class="tab-main">
              <div v-if="item.isExecute===0" v-for="item in ambTask" class="tab-line">
                <div class="tab-line-status" v-if="item.status===6"><span class="bg-lightblue">途中待命</span></div>
                <div class="tab-line-status" v-else-if="item.status===7"><span class="bg-green">站内待命</span></div>
                <div class="tab-line-name">川A56789</div>
                <div class="tab-line-station">宜春中心医院分站</div>
              </div>
            </div>
          </div>
        </div>
        <div class="t-right-bar">
          <!-- 右侧柱状图 -->
          <Chart id="bar3" width="100%" height="100%" :option="bar3opt" />
        </div>
      </div>
    </div>
    <div class="bottom">
      <div class="b-left">
        <!-- 底部折线图 -->
        <Chart id="line" width="100%" height="100%" :option="lineopt" />
      </div>
      <div class="b-right">
        <!-- 底部右侧饼图 -->
        <Chart id="pie" width="100%" height="100%" :option="pieopt" />
      </div>
    </div>
  </div>
</template>

<script>
import Axios from 'axios'
import E from 'echarts'
import Chart from './components/bar'

export default {
  name: 'app',
  data() {
    return {
      //  时间
      timeStr: '',
      //  统计数量
      commonStatistic: {},
      //  当月分站平均出车时间
      caroutTimeMonth: {},
      //  当日分站出车量
      sendCarDay: {},
      //  车辆状态
      ambTask: [],
      //  地图数据
      eventMap: [],
      //  颜色列表
      colorList: [
        '#C33531',
        '#EFE42A',
        '#64BD3D',
        '#EE9201',
        '#29AAE3',
        '#B74AE5',
        '#0AAF9F',
        '#E89589',
        '#16A085',
        '#4A235A',
        '#C39BD3',
        '#F9E79F',
        '#BA4A00',
        '#ECF0F1',
        '#616A6B',
        '#EAF2F8',
        '#4A235A',
        '#3498DB'
      ],
      //  当月分站平均出车时间
      bar1opt: {
        title: {
          text: '>>当月分站平均出车时间<<',
          textStyle: {
            color: '#59acff',
            fontSize: 20
          },
          left: 'center' //  标题居中
        },
        tooltip: {
          show: true
        },
        xAxis: {
          data: [],
          axisLabel: {
            textStyle: {
              color: '#59acff',
              fontSize: 20
            },
            interval: 0 //  强制显示所有刻度标签
          },
          axisLine: {
            lineStyle: {
              color: '#59acff' //  轴线颜色
            }
          },
          axisTick: {
            alignWithLabel: true, //  刻度对齐柱状图
            inside: true //  刻度向内
          }
        },
        yAxis: {
          name: '时间：分钟',
          nameTextStyle: {
            fontSize: 20
          },
          axisLabel: {
            textStyle: {
              color: '#59acff',
              fontSize: 20
            }
          },
          splitLine: {
            show: false //  隐藏轴向分隔线
          },
          axisLine: {
            lineStyle: {
              color: '#59acff'
            }
          },
          axisTick: {
            inside: true
          }
        },
        series: [
          {
            name: '时间',
            type: 'bar',
            barWidth: 30,
            data: [],
            itemStyle: {
              normal: {
                color: new E.graphic.LinearGradient(0, 0, 0, 1, [
                  //  柱状图渐变
                  { offset: 0, color: '#e10019' },
                  { offset: 1, color: '#3399ff' }
                ])
              }
            }
          }
        ]
      },
      //  当日分站出车量
      bar2opt: {
        title: {
          text: '>>当日分站出车量<<',
          textStyle: {
            color: '#59acff',
            fontSize: 20
          },
          left: 'center' //  标题居中
        },
        tooltip: {
          show: true
        },
        xAxis: {
          data: [],
          axisLabel: {
            show: false,
            textStyle: {
              color: '#59acff',
              fontSize: 20
            },
            interval: 0
          },
          axisLine: {
            lineStyle: {
              color: '#59acff' //  轴线颜色
            }
          },
          axisTick: {
            alignWithLabel: true, //  刻度对齐柱状图
            inside: true //  刻度向内
          }
        },
        yAxis: {
          nameTextStyle: {
            fontSize: 20
          },
          axisLabel: {
            textStyle: {
              color: '#59acff',
              fontSize: 20
            }
          },
          splitLine: {
            show: false //  隐藏轴向分隔线
          },
          axisLine: {
            lineStyle: {
              color: '#59acff'
            }
          },
          axisTick: {
            inside: true
          }
        },
        series: [
          {
            name: '',
            type: 'bar',
            barWidth: 30,
            data: [],
            itemStyle: {
              normal: {
                label: {
                  show: true,
                  position: 'top'
                },
                color: params => {
                  return this.colorList[params.dataIndex]
                }
              }
            }
          }
        ]
      },
      //  当月调度员平均受理时间
      bar3opt: {
        title: {
          text: '>>当月调度员平均受理时间<<',
          textStyle: {
            color: '#59acff',
            fontSize: 20
          },
          left: 'center' //  标题居中
        },
        tooltip: {
          show: true
        },
        xAxis: {
          data: [],
          axisLabel: {
            textStyle: {
              color: '#59acff',
              fontSize: 20
            },
            interval: 0
          },
          axisLine: {
            lineStyle: {
              color: '#59acff' //  轴线颜色
            }
          },
          axisTick: {
            alignWithLabel: true, //  刻度对齐柱状图
            inside: true //  刻度向内
          }
        },
        yAxis: {
          name: '时间：秒',
          nameTextStyle: {
            fontSize: 20
          },
          axisLabel: {
            textStyle: {
              color: '#59acff',
              fontSize: 20
            }
          },
          splitLine: {
            show: false //  隐藏轴向分隔线
          },
          axisLine: {
            lineStyle: {
              color: '#59acff'
            }
          },
          axisTick: {
            inside: true
          }
        },
        series: [
          {
            name: '时间',
            type: 'bar',
            barWidth: 30,
            data: [],
            itemStyle: {
              normal: {
                color: new E.graphic.LinearGradient(0, 0, 0, 1, [
                  //  柱状图渐变
                  { offset: 0, color: '#e10019' },
                  { offset: 1, color: '#3399ff' }
                ])
              }
            }
          }
        ]
      },
      //  24小时呼入量
      lineopt: {
        title: {
          text: '>>24小时呼入量<<',
          textStyle: {
            color: '#59acff',
            fontSize: 20
          },
          left: 'center' //  标题居中
        },
        xAxis: {
          type: 'category',
          boundaryGap: false,
          data: [
            0,
            1,
            2,
            3,
            4,
            5,
            6,
            7,
            8,
            9,
            10,
            11,
            12,
            13,
            14,
            15,
            16,
            17,
            18,
            19,
            20,
            21,
            22,
            23
          ],
          axisLine: {
            lineStyle: {
              color: '#59acff' //  轴线颜色
            }
          }
        },
        yAxis: {
          type: 'value',
          splitLine: {
            show: false //  隐藏轴向分隔线
          },
          axisLine: {
            lineStyle: {
              color: '#59acff' //  轴线颜色
            }
          }
        },
        series: [
          {
            data: [],
            type: 'line',
            label: {
              show: true
            },
            areaStyle: {}
          }
        ]
      },
      //  任务类型
      pieopt: {
        title: {
          text: '>>任务类型<<',
          textStyle: {
            color: '#59acff',
            fontSize: 20
          },
          left: 'center'
        },
        tooltip: {
          trigger: 'item',
          formatter: '{a} <br/>{b} : {c} ({d}%)'
        },
        series: [
          {
            name: '任务类型',
            type: 'pie',
            radius: '65%',
            center: ['50%', '50%'],
            selectedMode: 'single',
            label: {
              normal: {
                formatter: '{b| {b}：}{c}  {per|{d}%}  ',
                backgroundColor: 'transparent',
                borderColor: '#aaa',
                borderWidth: 1,
                borderRadius: 4,
                rich: {
                  b: {
                    fontSize: 16,
                    lineHeight: 33
                  },
                  per: {
                    color: '#eee',
                    backgroundColor: '#334455',
                    padding: [2, 4],
                    borderRadius: 2
                  }
                }
              }
            },
            data: [],
            itemStyle: {
              emphasis: {
                shadowBlur: 10,
                shadowOffsetX: 0,
                shadowColor: 'rgba(0, 0, 0, 0.5)'
              }
            }
          }
        ]
      },
      //  地图 geoJSON
      geoJSON: {
        type: 'FeatureCollection',
        features: [
          {
            type: 'Feature',
            properties: { name: '丰城市' },
            geometry: {
              type: 'MultiPolygon',
              coordinates: [
                [
                  [
                    [115.673922148438, 28.3760353828125],
                    [115.677345, 28.363843],
                    [115.665152617188, 28.3672658515626],
                    [115.673922148438, 28.3760353828125]
                  ]
                ],
                [
                  [
                    [115.687345, 28.0738430000001],
                    [115.699537382813, 28.0772658515625],
                    [115.690767851563, 28.0860353828125],
                    [115.649888945313, 28.0763869453125],
                    [115.643990507813, 28.1052614570313],
                    [115.632315703125, 28.0939870429688],
                    [115.614801054688, 28.1112990546875],
                    [115.579888945313, 28.1163869453125],
                    [115.574801054688, 28.1312990546876],
                    [115.567345, 28.133843],
                    [115.573375273438, 28.1491872382813],
                    [115.544132109375, 28.1717629218751],
                    [115.541549101563, 28.1892336250001],
                    [115.558448515625, 28.2172512031251],
                    [115.53170046875, 28.22819846875],
                    [115.51427859375, 28.2507741523438],
                    [115.49170046875, 28.26819846875],
                    [115.475894804688, 28.288676984375],
                    [115.43298953125, 28.3006252265625],
                    [115.45170046875, 28.3294875312501],
                    [115.50298953125, 28.36819846875],
                    [115.5160559375, 28.3851296210938],
                    [115.527345, 28.393843],
                    [115.5786340625, 28.4025563789063],
                    [115.598424101563, 28.4281984687501],
                    [115.61298953125, 28.41948753125],
                    [115.62170046875, 28.40819846875],
                    [115.649386015625, 28.3868288398438],
                    [115.6161340625, 28.341977765625],
                    [115.642735625, 28.3380471015625],
                    [115.661954375, 28.3496388984375],
                    [115.67490359375, 28.3477248359376],
                    [115.695289335938, 28.3741335273438],
                    [115.72220828125, 28.3578932929688],
                    [115.75205203125, 28.36962425],
                    [115.775928984375, 28.3660964179688],
                    [115.80170046875, 28.39948753125],
                    [115.817345, 28.403843],
                    [115.848839140625, 28.3812697578126],
                    [115.867203398438, 28.2896681953125],
                    [115.887701445313, 28.3003884101563],
                    [115.902345, 28.3208180976563],
                    [115.912345, 28.3068679023438],
                    [115.922789335938, 28.3214406562501],
                    [115.953453398438, 28.2994631171876],
                    [115.950299101563, 28.2834987617188],
                    [115.982345, 28.2898317695313],
                    [116.002345, 28.2858791328125],
                    [116.0532825, 28.2959450507813],
                    [116.081519804688, 28.2780178046875],
                    [116.097345, 28.2738430000001],
                    [116.100704375, 28.2572023750001],
                    [116.107345, 28.243843],
                    [116.10125125, 28.220747296875],
                    [116.073170195313, 28.1765163398438],
                    [116.089454375, 28.1404372382813],
                    [116.144097929688, 28.1294826484375],
                    [116.127823515625, 28.103843],
                    [116.1450403125, 28.0767189765626],
                    [116.121519804688, 28.0396681953125],
                    [116.113170195313, 28.0080178046875],
                    [116.101519804688, 27.9996681953125],
                    [116.057345, 27.933843],
                    [116.041793242188, 27.9293971992188],
                    [116.012896757813, 27.9082888007813],
                    [115.961793242188, 27.8993971992188],
                    [115.90802859375, 27.88718284375],
                    [115.883702421875, 27.8568093085937],
                    [115.861807890625, 27.8595314765626],
                    [115.848175078125, 27.7505226875001],
                    [115.827345, 27.7338430000001],
                    [115.762828398438, 27.7419045234376],
                    [115.727345, 27.7338430000001],
                    [115.72326296875, 27.7597585273438],
                    [115.69142703125, 27.7779274726563],
                    [115.67857546875, 27.8122805],
                    [115.647345, 27.833843],
                    [115.652271757813, 27.8811013007813],
                    [115.680147734375, 27.9324025703125],
                    [115.62377078125, 27.982778546875],
                    [115.681304960938, 28.0341872382813],
                    [115.713043242188, 28.0487526679688],
                    [115.696783476563, 28.0632814765626],
                    [115.687345, 28.0738430000001]
                  ]
                ]
              ]
            }
          },
          {
            type: 'Feature',
            properties: { name: '奉新县' },
            geometry: {
              type: 'MultiPolygon',
              coordinates: [
                [
                  [
                    [115.400054960938, 28.8622365546875],
                    [115.437345, 28.8576003242188],
                    [115.467906523438, 28.86140159375],
                    [115.482896757813, 28.8493971992187],
                    [115.487345, 28.8438430000001],
                    [115.478140898438, 28.8107814765625],
                    [115.45298953125, 28.7781984687501],
                    [115.43298953125, 28.7627614570313],
                    [115.4443371875, 28.7307643867188],
                    [115.462428007813, 28.7280910468751],
                    [115.528370390625, 28.7407692695313],
                    [115.550860625, 28.7234108710938],
                    [115.53298953125, 28.61819846875],
                    [115.52170046875, 28.60948753125],
                    [115.517345, 28.603843],
                    [115.493238554688, 28.6133205390625],
                    [115.422750273438, 28.5680446601562],
                    [115.410284453125, 28.5698854804688],
                    [115.414215117188, 28.5965016914063],
                    [115.370225859375, 28.60819846875],
                    [115.3731653125, 28.5883034492188],
                    [115.33377078125, 28.5647414375],
                    [115.30576296875, 28.6115651679688],
                    [115.253487578125, 28.6038405585938],
                    [115.24298953125, 28.62948753125],
                    [115.206124296875, 28.6445729804688],
                    [115.114190703125, 28.6309889960937],
                    [115.09298953125, 28.61819846875],
                    [115.07170046875, 28.60948753125],
                    [115.057125273438, 28.5906008125],
                    [115.017345, 28.583843],
                    [115.013170195313, 28.5896681953126],
                    [115.001519804688, 28.5980178046876],
                    [114.993170195313, 28.6096681953125],
                    [114.961519804688, 28.6180178046875],
                    [114.929386015625, 28.6312233710938],
                    [114.871793242188, 28.6198415351563],
                    [114.850406523438, 28.6062624335938],
                    [114.827345, 28.6108180976563],
                    [114.809244414063, 28.6072414375],
                    [114.788995390625, 28.6354933906251],
                    [114.765220976563, 28.6525319648438],
                    [114.737345, 28.6938430000001],
                    [114.749234648438, 28.7081569648438],
                    [114.792359648438, 28.726860578125],
                    [114.807345, 28.7779201484376],
                    [114.832735625, 28.7473537421876],
                    [114.855582304688, 28.74968284375],
                    [114.871881132813, 28.7693044257813],
                    [114.914527617188, 28.8047292304688],
                    [114.907345, 28.823843],
                    [114.952896757813, 28.8193971992188],
                    [115.02607546875, 28.8027736640626],
                    [115.062896757813, 28.8182888007812],
                    [115.077139921875, 28.8360768867188],
                    [115.125323515625, 28.8545973945313],
                    [115.216207304688, 28.83745628125],
                    [115.2384778125, 28.8402272773438],
                    [115.31906375, 28.8284987617187],
                    [115.334117460938, 28.7927712226563],
                    [115.380284453125, 28.775024640625],
                    [115.391793242188, 28.7893971992188],
                    [115.407550078125, 28.8020143867188],
                    [115.400054960938, 28.8622365546875]
                  ]
                ]
              ]
            }
          },
          {
            type: 'Feature',
            properties: { name: '高安市' },
            geometry: {
              type: 'MultiPolygon',
              coordinates: [
                [
                  [
                    [115.24298953125, 28.62948753125],
                    [115.253487578125, 28.6038405585938],
                    [115.30576296875, 28.6115651679688],
                    [115.33377078125, 28.5647414375],
                    [115.3731653125, 28.5883034492188],
                    [115.370225859375, 28.60819846875],
                    [115.414215117188, 28.5965016914063],
                    [115.410284453125, 28.5698854804688],
                    [115.422750273438, 28.5680446601562],
                    [115.493238554688, 28.6133205390625],
                    [115.517345, 28.603843],
                    [115.525426054688, 28.5878688789063],
                    [115.557345, 28.583843],
                    [115.5809778125, 28.5948830390625],
                    [115.5737121875, 28.5774733710938],
                    [115.557022734375, 28.5679592109375],
                    [115.5698840625, 28.5338430000001],
                    [115.560460234375, 28.508843],
                    [115.564561796875, 28.4979592109375],
                    [115.538795195313, 28.4832643867188],
                    [115.54611453125, 28.4638430000001],
                    [115.540460234375, 28.448843],
                    [115.550767851563, 28.4214968085938],
                    [115.5309778125, 28.4102126289063],
                    [115.527345, 28.393843],
                    [115.5160559375, 28.3851296210938],
                    [115.50298953125, 28.36819846875],
                    [115.45170046875, 28.3294875312501],
                    [115.43298953125, 28.3006252265625],
                    [115.475894804688, 28.288676984375],
                    [115.49170046875, 28.26819846875],
                    [115.51427859375, 28.2507741523438],
                    [115.53170046875, 28.22819846875],
                    [115.558448515625, 28.2172512031251],
                    [115.541549101563, 28.1892336250001],
                    [115.544132109375, 28.1717629218751],
                    [115.573375273438, 28.1491872382813],
                    [115.567345, 28.133843],
                    [115.49740359375, 28.1251052070313],
                    [115.457345, 28.1300856757812],
                    [115.423702421875, 28.125903546875],
                    [115.39834109375, 28.1575734687501],
                    [115.382545195313, 28.13784690625],
                    [115.355347929688, 28.1538356757813],
                    [115.342896757813, 28.1382888007813],
                    [115.30068484375, 28.12050315625],
                    [115.282896757813, 28.0982888007813],
                    [115.246920195313, 28.0793971992188],
                    [115.222896757813, 28.1093971992188],
                    [115.209303007813, 28.1182888007813],
                    [115.213023710938, 28.0883888984376],
                    [115.19068484375, 28.0705031562501],
                    [115.172725859375, 28.0480763984376],
                    [115.147345, 28.053843],
                    [115.15670046875, 28.0766139960938],
                    [115.106173125, 28.0880178046875],
                    [115.047345, 28.0738430000001],
                    [115.042808867188, 28.0893044257813],
                    [115.023267851563, 28.1055373359375],
                    [115.062808867188, 28.1383815742188],
                    [115.071881132813, 28.1893044257813],
                    [115.082808867188, 28.1983815742188],
                    [115.097174101563, 28.2156764960938],
                    [115.081881132813, 28.2283815742188],
                    [115.066456328125, 28.2469509101563],
                    [115.096436796875, 28.2599538398438],
                    [115.112345, 28.2583327460938],
                    [115.127345, 28.2598610664063],
                    [115.147178984375, 28.2578395820313],
                    [115.161881132813, 28.2853688789063],
                    [115.131881132813, 28.2983815742188],
                    [115.122808867188, 28.3093044257813],
                    [115.081881132813, 28.3383815742188],
                    [115.077345, 28.4238430000001],
                    [115.10170046875, 28.43948753125],
                    [115.13170046875, 28.4517653632813],
                    [115.113199492188, 28.4894020820312],
                    [115.02125125, 28.5264357734376],
                    [115.024327421875, 28.5472658515625],
                    [115.007056914063, 28.5759011054688],
                    [115.017345, 28.583843],
                    [115.057125273438, 28.5906008125],
                    [115.07170046875, 28.60948753125],
                    [115.09298953125, 28.61819846875],
                    [115.114190703125, 28.6309889960937],
                    [115.206124296875, 28.6445729804688],
                    [115.24298953125, 28.62948753125]
                  ]
                ]
              ]
            }
          },
          {
            type: 'Feature',
            properties: { name: '靖安县' },
            geometry: {
              type: 'MultiPolygon',
              coordinates: [
                [
                  [
                    [115.382628203125, 29.0791237617188],
                    [115.412491484375, 29.0684084296875],
                    [115.417345, 29.0738430000001],
                    [115.432315703125, 29.0662697578126],
                    [115.440704375, 29.037202375],
                    [115.463985625, 29.030483625],
                    [115.467345, 29.013843],
                    [115.459185820313, 28.9806203437501],
                    [115.49326296875, 28.9397585273438],
                    [115.50142703125, 28.9179274726563],
                    [115.518253203125, 28.8920900703125],
                    [115.524503203125, 28.8642116523438],
                    [115.505250273438, 28.83632346875],
                    [115.487345, 28.8438430000001],
                    [115.482896757813, 28.8493971992187],
                    [115.467906523438, 28.86140159375],
                    [115.437345, 28.8576003242188],
                    [115.400054960938, 28.8622365546875],
                    [115.407550078125, 28.8020143867188],
                    [115.391793242188, 28.7893971992188],
                    [115.380284453125, 28.775024640625],
                    [115.334117460938, 28.7927712226563],
                    [115.31906375, 28.8284987617187],
                    [115.2384778125, 28.8402272773438],
                    [115.216207304688, 28.83745628125],
                    [115.125323515625, 28.8545973945313],
                    [115.077139921875, 28.8360768867188],
                    [115.062896757813, 28.8182888007812],
                    [115.02607546875, 28.8027736640626],
                    [114.952896757813, 28.8193971992188],
                    [114.907345, 28.823843],
                    [114.900303984375, 28.8281813789063],
                    [114.913990507813, 28.8683425117188],
                    [114.937345, 28.8738430000001],
                    [114.95271609375, 28.8875783515625],
                    [114.950421171875, 28.9261037421875],
                    [114.963194609375, 28.94960471875],
                    [114.9620325, 28.969067609375],
                    [114.982603789063, 29.0069240546875],
                    [115.032628203125, 29.0185622382812],
                    [115.14656375, 29.0804763007812],
                    [115.305553007813, 29.1052516914063],
                    [115.352061796875, 29.0885622382813],
                    [115.382628203125, 29.0791237617188]
                  ]
                ]
              ]
            }
          },
          {
            type: 'Feature',
            properties: { name: '上高县' },
            geometry: {
              type: 'MultiPolygon',
              coordinates: [
                [
                  [
                    [115.161881132813, 28.2853688789063],
                    [115.147178984375, 28.2578395820313],
                    [115.127345, 28.2598610664063],
                    [115.112345, 28.2583327460938],
                    [115.096436796875, 28.2599538398438],
                    [115.066456328125, 28.2469509101563],
                    [115.081881132813, 28.2283815742188],
                    [115.097174101563, 28.2156764960938],
                    [115.082808867188, 28.1983815742188],
                    [115.071881132813, 28.1893044257813],
                    [115.062808867188, 28.1383815742188],
                    [115.023267851563, 28.1055373359375],
                    [115.042808867188, 28.0893044257813],
                    [115.047345, 28.0738430000001],
                    [115.017613554688, 28.0811452460937],
                    [114.993013945313, 28.0756301093751],
                    [114.98326296875, 28.0897585273438],
                    [114.963975859375, 28.0979274726563],
                    [114.94326296875, 28.0679274726563],
                    [114.917257109375, 28.0581960273438],
                    [114.90326296875, 28.0379274726563],
                    [114.877345, 28.033843],
                    [114.871910429688, 28.0523659492188],
                    [114.832345, 28.0483327460938],
                    [114.822022734375, 28.0493849921875],
                    [114.801158476563, 28.0374343085938],
                    [114.769976835938, 28.0406130195313],
                    [114.775870390625, 28.0984084296876],
                    [114.736964140625, 28.1098244453126],
                    [114.643638945313, 28.1003102851563],
                    [114.622808867188, 28.0883815742188],
                    [114.591881132813, 28.0793044257813],
                    [114.567345, 28.063843],
                    [114.53170046875, 28.04948753125],
                    [114.50459109375, 28.0331325507813],
                    [114.477345, 28.0438430000001],
                    [114.48244265625, 28.0631618476563],
                    [114.504918242188, 28.0792726875],
                    [114.52341921875, 28.1084108710938],
                    [114.520347929688, 28.1239455390625],
                    [114.538492460938, 28.2144460273438],
                    [114.580968046875, 28.2468849921875],
                    [114.607345, 28.253843],
                    [114.6126575, 28.2336989570313],
                    [114.6718371875, 28.2580178046876],
                    [114.706671171875, 28.2487355781251],
                    [114.734674101563, 28.2096681953126],
                    [114.782784453125, 28.2201027656251],
                    [114.811519804688, 28.2696681953125],
                    [114.843463164063, 28.288188703125],
                    [114.839332304688, 28.3090895820313],
                    [114.891143828125, 28.3227590156251],
                    [114.901519804688, 28.3496681953125],
                    [114.953170195313, 28.3580178046875],
                    [114.981519804688, 28.3696681953125],
                    [115.013170195313, 28.3780178046876],
                    [115.049010039063, 28.4306716132813],
                    [115.077345, 28.4238430000001],
                    [115.081881132813, 28.3383815742188],
                    [115.122808867188, 28.3093044257813],
                    [115.131881132813, 28.2983815742188],
                    [115.161881132813, 28.2853688789063]
                  ]
                ]
              ]
            }
          },
          {
            type: 'Feature',
            properties: { name: '铜鼓县' },
            geometry: {
              type: 'MultiPolygon',
              coordinates: [
                [
                  [
                    [114.21244265625, 28.8292311835938],
                    [114.222345, 28.808247296875],
                    [114.252896757813, 28.8094582343751],
                    [114.272818632813, 28.7672463203126],
                    [114.3426184375, 28.7082595039063],
                    [114.367345, 28.7092385078126],
                    [114.387345, 28.7084474921876],
                    [114.417345, 28.7096364570313],
                    [114.452345, 28.7082472968751],
                    [114.47119265625, 28.7481813789063],
                    [114.502193632813, 28.7590480781251],
                    [114.512496367188, 28.758637921875],
                    [114.569503203125, 28.778618390625],
                    [114.587203398438, 28.7227028632813],
                    [114.632686796875, 28.6914064765626],
                    [114.702476835938, 28.6886403632813],
                    [114.727345, 28.6938430000001],
                    [114.722803984375, 28.6575221992188],
                    [114.688931914063, 28.6017580390625],
                    [114.631793242188, 28.5893971992188],
                    [114.602486601563, 28.5781325507813],
                    [114.5502746875, 28.5899904609375],
                    [114.527457304688, 28.5614943671875],
                    [114.473560820313, 28.5236086250001],
                    [114.471099882813, 28.5038430000001],
                    [114.47302859375, 28.4883278632813],
                    [114.426239042969, 28.4749489570313],
                    [114.417345, 28.4638430000001],
                    [114.401519804688, 28.4596681953125],
                    [114.373170195313, 28.4380178046875],
                    [114.307366972656, 28.4248244453125],
                    [114.293170195313, 28.3880178046875],
                    [114.257345, 28.3838430000001],
                    [114.25170046875, 28.38819846875],
                    [114.24298953125, 28.39948753125],
                    [114.21170046875, 28.40819846875],
                    [114.196324492188, 28.4281227851563],
                    [114.170611601563, 28.4386452460938],
                    [114.214066191406, 28.4721877265625],
                    [114.210765410156, 28.4945363593751],
                    [114.16170046875, 28.5081984687501],
                    [114.12298953125, 28.53948753125],
                    [114.09170046875, 28.5481984687501],
                    [114.077345, 28.553843],
                    [114.123504667969, 28.609419171875],
                    [114.121942167969, 28.628843],
                    [114.124354277344, 28.658843],
                    [114.121165800781, 28.6985182929688],
                    [114.13271609375, 28.7084719062501],
                    [114.143387480469, 28.7208571601563],
                    [114.14193484375, 28.7389601875],
                    [114.147345, 28.773843],
                    [114.152535429688, 28.7786525703125],
                    [114.176456328125, 28.804468],
                    [114.21244265625, 28.8292311835938]
                  ]
                ]
              ]
            }
          },
          {
            type: 'Feature',
            properties: { name: '万载县' },
            geometry: {
              type: 'MultiPolygon',
              coordinates: [
                [
                  [
                    [114.538492460938, 28.2144460273438],
                    [114.520347929688, 28.1239455390625],
                    [114.52341921875, 28.1084108710938],
                    [114.504918242188, 28.0792726875],
                    [114.48244265625, 28.0631618476563],
                    [114.477345, 28.0438430000001],
                    [114.451793242188, 28.0393971992188],
                    [114.402506132813, 28.0282009101563],
                    [114.377345, 28.0313307929688],
                    [114.352061796875, 28.0281862617188],
                    [114.300623808594, 28.0479567695313],
                    [114.222345, 28.0382204414063],
                    [114.200985136719, 28.0408766914063],
                    [114.18099734375, 28.0159157539062],
                    [114.126175566406, 27.9928151679688],
                    [114.112899199219, 28.0093971992187],
                    [114.090553007813, 28.0272902656251],
                    [114.106163359375, 28.053843],
                    [114.088741484375, 28.083481671875],
                    [114.062899199219, 28.0682888007813],
                    [114.037345, 28.063843],
                    [114.032899199219, 28.0793971992188],
                    [114.001004667969, 28.1230593085938],
                    [114.003011503906, 28.1392018867188],
                    [113.987640410156, 28.1653493476563],
                    [114.038626738281, 28.1799269843751],
                    [114.062345, 28.1769777656251],
                    [114.086221953125, 28.179946515625],
                    [114.141790800781, 28.2493971992188],
                    [114.172899199219, 28.2582888007813],
                    [114.181790800781, 28.2693971992188],
                    [114.193023710938, 28.2783888984376],
                    [114.19166140625, 28.2893410468751],
                    [114.212899199219, 28.2982888007813],
                    [114.235972929688, 28.3118532539063],
                    [114.253607207031, 28.3537013984376],
                    [114.251688261719, 28.3691262031251],
                    [114.257345, 28.3838430000001],
                    [114.293170195313, 28.3880178046875],
                    [114.307366972656, 28.4248244453125],
                    [114.373170195313, 28.4380178046875],
                    [114.401519804688, 28.4596681953125],
                    [114.417345, 28.4638430000001],
                    [114.421768828125, 28.4378054023438],
                    [114.467164335938, 28.4041481757813],
                    [114.50298953125, 28.38948753125],
                    [114.5174621875, 28.3707326484376],
                    [114.571573515625, 28.3383718085937],
                    [114.59625125, 28.3050881171876],
                    [114.60298953125, 28.2594875312501],
                    [114.607345, 28.253843],
                    [114.580968046875, 28.2468849921875],
                    [114.538492460938, 28.2144460273438]
                  ],
                  [
                    [114.244346953125, 28.0578957343751],
                    [114.267345, 28.053843],
                    [114.261910429688, 28.0665407539063],
                    [114.244346953125, 28.0578957343751]
                  ]
                ]
              ]
            }
          },
          {
            type: 'Feature',
            properties: { name: '宜丰县' },
            geometry: {
              type: 'MultiPolygon',
              coordinates: [
                [
                  [
                    [114.788995390625, 28.6354933906251],
                    [114.809244414063, 28.6072414375],
                    [114.827345, 28.6108180976563],
                    [114.850406523438, 28.6062624335938],
                    [114.871793242188, 28.6198415351563],
                    [114.929386015625, 28.6312233710938],
                    [114.961519804688, 28.6180178046875],
                    [114.993170195313, 28.6096681953125],
                    [115.001519804688, 28.5980178046876],
                    [115.013170195313, 28.5896681953126],
                    [115.017345, 28.583843],
                    [115.007056914063, 28.5759011054688],
                    [115.024327421875, 28.5472658515625],
                    [115.02125125, 28.5264357734376],
                    [115.113199492188, 28.4894020820312],
                    [115.13170046875, 28.4517653632813],
                    [115.10170046875, 28.43948753125],
                    [115.077345, 28.4238430000001],
                    [115.049010039063, 28.4306716132813],
                    [115.013170195313, 28.3780178046876],
                    [114.981519804688, 28.3696681953125],
                    [114.953170195313, 28.3580178046875],
                    [114.901519804688, 28.3496681953125],
                    [114.891143828125, 28.3227590156251],
                    [114.839332304688, 28.3090895820313],
                    [114.843463164063, 28.288188703125],
                    [114.811519804688, 28.2696681953125],
                    [114.782784453125, 28.2201027656251],
                    [114.734674101563, 28.2096681953126],
                    [114.706671171875, 28.2487355781251],
                    [114.6718371875, 28.2580178046876],
                    [114.6126575, 28.2336989570313],
                    [114.607345, 28.253843],
                    [114.60298953125, 28.2594875312501],
                    [114.59625125, 28.3050881171876],
                    [114.571573515625, 28.3383718085937],
                    [114.5174621875, 28.3707326484376],
                    [114.50298953125, 28.38948753125],
                    [114.467164335938, 28.4041481757813],
                    [114.421768828125, 28.4378054023438],
                    [114.417345, 28.4638430000001],
                    [114.426239042969, 28.4749489570313],
                    [114.47302859375, 28.4883278632813],
                    [114.471099882813, 28.5038430000001],
                    [114.473560820313, 28.5236086250001],
                    [114.527457304688, 28.5614943671875],
                    [114.5502746875, 28.5899904609375],
                    [114.602486601563, 28.5781325507813],
                    [114.631793242188, 28.5893971992188],
                    [114.688931914063, 28.6017580390625],
                    [114.722803984375, 28.6575221992188],
                    [114.727345, 28.6938430000001],
                    [114.737345, 28.6938430000001],
                    [114.765220976563, 28.6525319648438],
                    [114.788995390625, 28.6354933906251]
                  ]
                ]
              ]
            }
          },
          {
            type: 'Feature',
            properties: { name: '袁州区' },
            geometry: {
              type: 'MultiPolygon',
              coordinates: [
                [
                  [
                    [114.157345, 27.743843],
                    [114.153922148438, 27.7316506171875],
                    [114.145152617188, 27.7404201484375],
                    [114.157345, 27.743843]
                  ]
                ],
                [
                  [
                    [114.261910429688, 28.0665407539063],
                    [114.267345, 28.053843],
                    [114.244346953125, 28.0578957343751],
                    [114.261910429688, 28.0665407539063]
                  ]
                ],
                [
                  [
                    [114.157345, 27.743843],
                    [114.153260527344, 27.7497585273438],
                    [114.115582304688, 27.7757741523438],
                    [114.103260527344, 27.7579274726563],
                    [114.071429472656, 27.7497585273438],
                    [114.057345, 27.743843],
                    [114.041790800781, 27.7482888007813],
                    [114.02095828125, 27.7605373359375],
                    [113.997345, 27.7576003242188],
                    [113.978472929688, 27.759946515625],
                    [113.95978640625, 27.7832814765625],
                    [113.963370390625, 27.8120803046875],
                    [113.931846953125, 27.80815940625],
                    [113.922899199219, 27.8293971992188],
                    [113.90166140625, 27.8383449531251],
                    [113.902967558594, 27.8488430000001],
                    [113.901722441406, 27.858843],
                    [113.903023710938, 27.8692971015625],
                    [113.891282988281, 27.8786989570312],
                    [113.915303984375, 27.9115846992188],
                    [113.942750273438, 27.9081716132813],
                    [113.997342558594, 27.9518337226563],
                    [113.980504179688, 27.9804787421875],
                    [113.952799101563, 27.9770339179687],
                    [113.941890898438, 27.9906520820313],
                    [113.922061796875, 27.9881862617187],
                    [113.907345, 27.993843],
                    [113.926761503906, 28.0209352851563],
                    [113.952345, 28.0158791328125],
                    [113.964469023438, 28.0473146796875],
                    [114.017928496094, 28.0367507148437],
                    [114.037345, 28.063843],
                    [114.062899199219, 28.0682888007813],
                    [114.088741484375, 28.083481671875],
                    [114.106163359375, 28.053843],
                    [114.090553007813, 28.0272902656251],
                    [114.112899199219, 28.0093971992187],
                    [114.126175566406, 27.9928151679688],
                    [114.18099734375, 28.0159157539062],
                    [114.200985136719, 28.0408766914063],
                    [114.222345, 28.0382204414063],
                    [114.300623808594, 28.0479567695313],
                    [114.352061796875, 28.0281862617188],
                    [114.377345, 28.0313307929688],
                    [114.402506132813, 28.0282009101563],
                    [114.451793242188, 28.0393971992188],
                    [114.477345, 28.0438430000001],
                    [114.50459109375, 28.0331325507813],
                    [114.53170046875, 28.04948753125],
                    [114.567345, 28.063843],
                    [114.59197390625, 28.00847190625],
                    [114.606793242188, 27.9819045234376],
                    [114.564439726563, 27.9582741523438],
                    [114.526065703125, 27.9613552070313],
                    [114.5119153125, 27.9491677070313],
                    [114.513551054688, 27.9288430000001],
                    [114.483267851563, 27.9153298164063],
                    [114.48072390625, 27.8836794257813],
                    [114.504371367188, 27.830688703125],
                    [114.542022734375, 27.8276638007813],
                    [114.559947539063, 27.84847190625],
                    [114.579000273438, 27.8197365546875],
                    [114.55271609375, 27.7726247382813],
                    [114.562086210938, 27.7684206367188],
                    [114.58197390625, 27.7700173164063],
                    [114.571944609375, 27.7250148750001],
                    [114.534390898438, 27.6577053046875],
                    [114.527345, 27.603843],
                    [114.509439726563, 27.61136253125],
                    [114.49326296875, 27.5879274726563],
                    [114.461138945313, 27.5657497382812],
                    [114.442066679688, 27.5700270820313],
                    [114.402183867188, 27.5532741523438],
                    [114.371673613281, 27.5601149726563],
                    [114.362691679688, 27.54710471875],
                    [114.343260527344, 27.5597585273437],
                    [114.321429472656, 27.5679274726563],
                    [114.294700957031, 27.5853322578125],
                    [114.267345, 27.573843],
                    [114.255091582031, 27.5915895820313],
                    [114.219598417969, 27.6160964179688],
                    [114.200186796875, 27.6442116523438],
                    [114.2069153125, 27.6742287421876],
                    [114.163905058594, 27.7393141914063],
                    [114.157345, 27.743843]
                  ]
                ]
              ]
            }
          },
          {
            type: 'Feature',
            properties: { name: '樟树市' },
            geometry: {
              type: 'MultiPolygon',
              coordinates: [
                [
                  [
                    [115.417345, 27.953843],
                    [115.429537382813, 27.9504201484376],
                    [115.420767851563, 27.9416506171876],
                    [115.417345, 27.953843]
                  ]
                ],
                [
                  [
                    [115.687345, 28.0738430000001],
                    [115.690767851563, 28.0860353828125],
                    [115.699537382813, 28.0772658515625],
                    [115.687345, 28.0738430000001]
                  ]
                ],
                [
                  [
                    [115.687345, 28.0738430000001],
                    [115.696783476563, 28.0632814765626],
                    [115.713043242188, 28.0487526679688],
                    [115.681304960938, 28.0341872382813],
                    [115.62377078125, 27.982778546875],
                    [115.680147734375, 27.9324025703125],
                    [115.652271757813, 27.8811013007813],
                    [115.647345, 27.833843],
                    [115.635269804688, 27.8193044257813],
                    [115.601881132813, 27.8383815742188],
                    [115.572808867188, 27.8593044257813],
                    [115.539488554688, 27.873755109375],
                    [115.502808867188, 27.9042263007813],
                    [115.511881132813, 27.9193044257813],
                    [115.531881132813, 27.9359181953125],
                    [115.518492460938, 27.9556691718751],
                    [115.474893828125, 27.9601125312501],
                    [115.461793242188, 27.949233625],
                    [115.464845, 27.9193044257813],
                    [115.44375125, 27.9340724921875],
                    [115.429058867188, 27.9679470039063],
                    [115.417345, 27.953843],
                    [115.382862578125, 27.94726096875],
                    [115.4026965625, 27.9288845039063],
                    [115.381685820313, 27.8983522773438],
                    [115.402843046875, 27.8787502265625],
                    [115.387345, 27.873843],
                    [115.322349882813, 27.8792458320313],
                    [115.307345, 27.8780397773438],
                    [115.287345, 27.8796462226563],
                    [115.267345, 27.8780397773438],
                    [115.252345, 27.8792458320313],
                    [115.242022734375, 27.8784157539063],
                    [115.227345, 27.8954494453126],
                    [115.21259890625, 27.8783351875],
                    [115.138175078125, 27.8945680976563],
                    [115.109615507813, 27.9585695625001],
                    [115.1327746875, 27.9785182929688],
                    [115.131217070313, 27.9978615546875],
                    [115.14271609375, 28.0184719062501],
                    [115.147345, 28.053843],
                    [115.172725859375, 28.0480763984376],
                    [115.19068484375, 28.0705031562501],
                    [115.213023710938, 28.0883888984376],
                    [115.209303007813, 28.1182888007813],
                    [115.222896757813, 28.1093971992188],
                    [115.246920195313, 28.0793971992188],
                    [115.282896757813, 28.0982888007813],
                    [115.30068484375, 28.12050315625],
                    [115.342896757813, 28.1382888007813],
                    [115.355347929688, 28.1538356757813],
                    [115.382545195313, 28.13784690625],
                    [115.39834109375, 28.1575734687501],
                    [115.423702421875, 28.125903546875],
                    [115.457345, 28.1300856757812],
                    [115.49740359375, 28.1251052070313],
                    [115.567345, 28.133843],
                    [115.574801054688, 28.1312990546876],
                    [115.579888945313, 28.1163869453125],
                    [115.614801054688, 28.1112990546875],
                    [115.632315703125, 28.0939870429688],
                    [115.643990507813, 28.1052614570313],
                    [115.649888945313, 28.0763869453125],
                    [115.687345, 28.0738430000001]
                  ]
                ]
              ]
            }
          }
        ]
      },
      //  地图 option
      mapopt: {
        title: {
          text: '>>今日事件各区分布<<',
          left: 'center',
          top: 'bottom',
          textStyle: {
            color: '#59acff'
          }
        },
        geo: {
          //  series 中的 scatter 与这里相呼应，不是 series 中的 type=map
          map: 'YC', //  与组件中 registerMap 参数对应
          zoom: 1, //  缩放
          roam: false, //  拖拽+滚轮缩放
          aspectScale: 1, //  地图长宽比
          label: {
            //  标签相关样式
            show: true,
            color: 'red'
          },
          emphasis: {
            //  鼠标悬停时标签相关样式
            show: true
          },
          itemStyle: {
            //  区域样式
            normal: {
              areaColor: 'transparent',
              borderColor: '#59acff'
            },
            emphasis: {
              areaColor: 'green'
            }
          }
        },
        series: [
          {
            //  这种点可以标在 option.geo 生成的地图上，而不是 option.series 下的 type = map 上
            name: 'pm2.5',
            type: 'scatter',
            coordinateSystem: 'geo',
            data: [
              {
                name: 'series.data.name',
                value: [115.638084, 28.119157, 100]
              }
            ],
            symbolSize: function(val) {
              return val[2] / 10
            },
            label: {
              normal: {
                formatter: '{b}',
                position: 'right',
                show: false
              },
              emphasis: {
                show: true
              }
            },
            itemStyle: {
              normal: {
                color: '#ddb926'
              }
            }
          },
          {
            name: 'Top 5',
            type: 'effectScatter',
            coordinateSystem: 'geo',
            data: [
              {
                name: 'series.data.name',
                value: [115.569858, 28.73115, 200]
              },
              {
                name: 'series.data.name',
                value: [114.569858, 28.13115, 200]
              }
            ],
            symbolSize: function(val) {
              return val[2] / 10
            },
            showEffectOn: 'render',
            rippleEffect: {
              brushType: 'stroke'
            },
            hoverAnimation: true,
            label: {
              normal: {
                formatter: '{b}',
                position: 'right',
                show: true
              }
            },
            itemStyle: {
              normal: {
                color: '#f4e925',
                shadowBlur: 10,
                shadowColor: '#333'
              }
            },
            zlevel: 1
          }
        ]
      }
    }
  },
  computed: {},
  mounted() {
    setInterval(()=>{
    let date = new Date()
    this.timeStr = this.formatDate(date,'YYYY年MM月DD日 hh:mm:ss 星期')
    },1000)
    //  登录
    this.$A
      .post('/api/login', {
        userName: '李河谕坐席',
        password: '123456'
      })
      .then(res => {
        if (res.data.success !== true) {
          alert('登录失败')
        }
      })

    //  统计数量（话务/接警/派车/完成）
    this.$A.get('/api/screen/queryCommonStatistics').then(res => {
      if (res.data.success === true) {
        this.commonStatistic = res.data.data
      }
    })

    //  当月分站平均出车时间
    this.$A.get('/api/screen/avgCaroutTimeMonth').then(res => {
      if (res.data.success === true) {
        this.caroutTimeMonth = res.data.data
        this.bar1opt.xAxis.data = this.caroutTimeMonth.map(item => {
          return item.org_name.substring(0, 2)
        })
        this.bar1opt.series[0].data = this.caroutTimeMonth.map(item => {
          return parseInt(item.avg_carout_time / 60)
        })
      }
    })

    //  当日分站出车量
    this.$A.get('/api/screen/quantitySendCarDay').then(res => {
      if (res.data.success === true) {
        this.sendCarDay = res.data.data
        this.bar2opt.xAxis.data = this.sendCarDay.map(item => {
          return item.org_name
        })
        this.bar2opt.series[0].data = this.sendCarDay.map(item => {
          return item.amount
        })
      }
    })

    //  当月调度员平均受理时间
    this.$A.get('/api/screen/avgAcceptTimeMonth').then(res => {
      if (res.data.success === true) {
        let arr = res.data.data
        this.bar3opt.xAxis.data = arr.map(item => {
          return item.staff_name.slice(-2)
        })
        this.bar3opt.series[0].data = arr.map(item => {
          return parseInt(item.avg_accept_time)
        })
      }
    })

    //  24小时呼入量
    this.$A.get('/api/screen/quantityCallinHour').then(res => {
      if (res.data.success === true) {
        //  后台只会返回有呼入量的小时和对应呼入量，因此需要生成一个 24 位都是 0 的数组
        let arr = res.data.data
        let init0Arr = []
        for (let n = 0; n < 24; n++) init0Arr[n] = 0

        //  将数组中对应的小时从 0 改为实际值
        for (let i = 0; i < arr.length; i++) {
          init0Arr[arr[i].hour] = arr[i].amount
        }
        this.lineopt.series[0].data = init0Arr
      }
    })

    //  车辆状态（表格区）
    this.$A.get('/api/screen/queryAmbTask').then(res => {
      if (res.data.success === true) {
        this.ambTask = res.data.data
      }
    })

    //  任务类型
    this.$A.get('/api/screen/queryEventType').then(res => {
      if (res.data.success === true) {
        let data = res.data.data.map(o => {
          return { value: o.amount, name: o.name }
        })
        this.pieopt.series[0].data = data
      }
    })

    //  事件坐标查询（地图）
    this.$A.get('/api/screen/queryEventMap').then(res => {
      if (res.data.success === true) {
        this.eventMap = res.data.data

        this.mapopt.series[0].data = this.eventMap.map(item => {
          let n = this.rd(-1, 1) //  模拟坐标
          let k = this.rd(-1, 1) //  模拟坐标
          return {
            name: item.eventName,
            // value: [item.senceAddrYcoordinate, item.senceAddrXcoordinate, 10]
            value: [114.412251 + n, 27.804604 + k, 50] //  模拟坐标
          }
        })
      }
    })
  },
  methods: {
    formatDate(date, format) {
        if (arguments.length < 2 && !date.getTime) {
            format = date;
            date = new Date();
        }
        typeof format != 'string' && (format = 'YYYY年MM月DD日 hh时mm分ss秒');
        var week = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', '日', '一', '二', '三', '四', '五', '六'];
        return format.replace(/YYYY|YY|MM|DD|hh|mm|ss|星期|周|www|week/g, function(a) {
            switch (a) {
            case "YYYY": return date.getFullYear();
            case "YY": return (date.getFullYear()+"").slice(2);
            case "MM": return date.getMonth() + 1;
            case "DD": return date.getDate();
            case "hh": return date.getHours()<10?'0'+date.getHours():date.getHours();
            case "mm": return date.getMinutes()<10?'0'+date.getMinutes():date.getMinutes();
            case "ss": return date.getSeconds()<10?'0'+date.getSeconds():date.getSeconds();
            case "星期": return "星期" + week[date.getDay() + 7];
            case "周": return "周" +  week[date.getDay() + 7];
            case "week": return week[date.getDay()];
            case "www": return week[date.getDay()].slice(0,3);
            }
        });
    },
    //  随机数
    rd(min, max) {
      let c = max - min + 1
      return Math.random() * c + min
    }
  },
  components: {
    Chart
  }
}
</script>

<style>
html,
body {
  margin: 0;
  padding: 0;
  width: 2560px;
  height: 1440px;
  background: url('./assets/images/bg.png') no-repeat;
}

hr {
  border-color: #113270;
  margin: 0;
}
.bg-green {
  background-color: #388868;
}
.bg-blue {
  background-color: #007bff;
}
.bg-lightblue {
  background-color: #3090f2;
}
.bg-yellow {
  background-color: #dfbc4d;
}
.bg-pink {
  background-color: #d74d87;
}
.bg-orange {
  background-color: #cf6d23;
}
.bg-purple {
  background-color: #563d7c;
}
.bg-cyan-blue {
  background-color: #17a2b8;
}

#app {
  font-family: 'Avenir', Helvetica, Arial, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  color: #fff;
  overflow: hidden;
}
.top,
.bottom {
  display: flex;
}
.top {
  margin: 20px 18px 0 26px;
  height: 1038px;
}
.t-left {
  width: 742px;
}
.numboxs {
  height: 264px;
}
.num {
  width: 360px;
  height: 124px;
  float: left;
  box-sizing: border-box;
  padding: 14px 30px;
}
.num:nth-child(1) {
  margin-right: 19px;
  margin-bottom: 18px;
}
.num:nth-child(3) {
  margin-right: 19px;
  margin-bottom: 18px;
}
.num .num-name {
  color: #59acff;
}
.num .num-value {
  text-align: center;
  font-size: 50px;
}
.left-bar {
  height: 750px;
  margin-top: 20px;
}
.left-bar2-box {
  display: flex;
  list-style: none;
}
.left-bar2-list ul {
  list-style: none;
  color: #59acff;
  padding: 0;
  width: 200px;
  height: 340px;
  overflow: auto;
  white-space: nowrap;
}
.left-bar2-list ul::-webkit-scrollbar {
  /* display: none; */
}
.left-bar2-list ul li {
  height: 30px;
  line-height: 30px;
}

.station-value {
  color: #fff;
  font-size: 20px;
  padding: 10px;
}

.circle {
  display: inline-block;
  width: 16px;
  height: 16px;
  margin-right: 10px;
  border-radius: 50%;
}
.t-mid {
  border: 1px solid red;
  width: 988px;
  margin: 0 20px;
}
.time {
  background-color:#041345;
  display:inline-block;  
  padding: 5px 10px;
  margin-left:50%;  
  transform: translate(-50%,100px);
  text-align: center;
  color:#59acff;
}
#YCmap {
  margin-top: 130px;
}
.area-count{
  overflow: hidden;
  margin-top:10px;
}
.area-count-item{
  width:20%;
  text-align: center;
  height:30px;
  line-height: 30px;  
  float:left;
}

.t-right {
  width: 746px;
}
.t-right-form {
  height: 745px;
  padding: 0 20px;
  color: #59acff;
}

.tab-title {
  color: #59acff;
  font-size: 20px;
  font-weight: bold;
  text-align: center;
  padding: 10px 0;
}
.tab-head {
  overflow: hidden;
  font-size: 18px;
  background-color: #041345;
  padding: 10px 0;
}
.tab-head-item {
  width: 33.333333%;
  float: left;
  padding-left: 20px;
  box-sizing: border-box;
}
.tab-main {
  height: 280px;
  overflow-y: auto;
}
.tab-main::-webkit-scrollbar {
  display: none;
}
.tab-line {
  overflow: hidden;
  height: 56px;
  line-height: 56px;
}
.tab-line > div {
  width: 33.333333%;
  float: left;
  padding-left: 20px;
  box-sizing: border-box;
}
.tab-line-status span {
  color: #fff;
  padding: 5px 10px;
  border-radius: 4px;
}

.t-right-bar {
  margin-top: 20px;
  height: 268px;
}

.bottom {
  margin: 20px 18px 0 26px;
  height: 334px;
}
.b-left {
  width: 1750px;
  height: 332px;
}
.b-right {
  margin-left: 20px;
  width: 742px;
  height: 332px;
}
</style>
